<%- include ('../header') %>
<%- include ('../../../partials/sidebar') %>
<section id="content">
<div class="container">
<div class="card">
                        <div class="card-header">
                            <h2>Restaurant Profile</h2>
                        </div>
                        
                        <div class="card-body card-padding">
                            <div role="tabpanel">
                                <ul class="tab-nav" role="tablist">
                                     <li class="active"><a href="#push" aria-controls="push" role="tab" data-toggle="tab">Details</a></li>
                                     <li><a href="#cost" aria-controls="cost" role="tab" data-toggle="tab">Cost</a></li>
                                    <li><a href="#settings11" aria-controls="settings11" role="tab" data-toggle="tab">Advance Setting</a></li>
                                </ul>
                              
                                <div class="tab-content">
                                    <div role="tabpanel" class="tab-pane active" id="push">
                                    <input type="hidden" name="restId" id="restid" value="<%-userData.id%>">
                                    <div class="mt-details-tabs">
                                    <div class="mt-details-tabs-content">
                                    <div class="row">
                                    <div class="col-sm-6">
                                    <div class="row">
                                    <div class="col-sm-4 col-xs-6">
                                    <label>Restaurant Name:</label>
                                    </div>
                                    <div class="col-sm-8 col-xs-6">
                                    <p><%- userData.companyName %></p>
                                    </div>
                                    </div>
                                    <div class="row">
                                    <div class="col-sm-4 col-xs-6">
                                    <label>Email Address:</label>
                                    </div>
                                    <div class="col-sm-8 col-xs-6">
                                    <p><%- userData.email %></p>
                                    </div>
                                    </div>
                                    </div>
                                    <div class="col-sm-6">
                                    <div class="row">
                                    <div class="col-sm-4 col-xs-6">
                                    <label>Contact Number:</label>
                                    </div>
                                    <div class="col-sm-8 col-xs-6">
                                    <p>(+<%-userData.countryCode %>) <%-userData.phoneNumber %> </p>
                                    </div>
                                    </div>
                                    <div class="row">
                                    <div class="col-sm-4 col-xs-6">
                                    <label>Initaiate Chat:<label>
                                    </div>
                                    <div class="col-sm-8 col-xs-6">

                                    </div>
                                    </div>
                                    </div>
                                    </div>
                                    <div class="row">
                                    <div class="col-sm-12">
                                    <label>Gallery</label>
                                    <div class="mt-gallery-images">
                                    <ul> 
                                    <% if(userData.companyImages){ %>
                                    <% for(var t=0;t<userData.companyImages.length;t++){ %>
                                    <li><img src="<%- userData.companyImages[t].picture %>" ></li>
                                    <% } %>
                                    <% }else{ %>
                                    <p>No Gallery Found!</p>
                                    <% } %>
                                    </ul>
                                    </div>
                                    </div>
                                    </div>
                                    <div class="row">
                                    <% if(userData.chef){ %>
                                    <div class="col-sm-8">
                                    <label>Chef Story</label>
                                    <div class="mt-story-textarea">
                                    <%- userData.chef.description %>
                                    </div>
                                    </div>
                                    <div class="col-sm-4">
                                    <div class="mt-details-user-name">
                                    <i class="zmdi zmdi-account-circle zmdi-hc-fw"></i>
                                    <p><%- userData.chef.name %></p>
                                    </div>
                                    </div>
                                    <% }else{ %>
                                    <div class="col-sm-12">
                                    <label>Chef Details</label>
                                    <div class="mt-details-user-name">
                                    <p>No Chef Details Found!</p>
                                    </div>
                                    </div>
                                    <% } %>
                                    </div>
                                    <div class="row">
                                    <div class="col-sm-8">
                                    <label>Cuisines</label>
                                    <div class="mt-cusins-details">
                                    <div class="mt-cusins-details-inner mt-cusins-details-inner-header">
                                    Cuisines Name
                                    </div>
                                    <% for(var i=0;i<userData.companyCuisines.length;i++){ %>
                                    <div class="mt-cusins-details-inner">
                                    <%- userData.companyCuisines[i].category.name %>
                                    </div>
                                    <% } %>
                                    </div>
                                    </div>
                                    </div>
                                    <div class="row">
                                    <div class="col-sm-12">
                                    <label>Uploaded Documents</label>
                                    <div class="mt-gallery-images">
                                    <ul> 
                                    <% if(userData.CompanyDocuments.length > 0){ %>
                                    <% for(var tt=0;tt<userData.CompanyDocuments.length;tt++){ %>
                                    <li><a href="<%- userData.CompanyDocuments[tt].document %>" ></a></li>
                                    <% } %>
                                    <% }else{ %>
                                    <p>No Documents Found!</p>
                                    <% } %>
                                    </ul>
                                    </div>
                                    </div>
                                    </div>
                                    <div class="row">
                                    <div class="col-sm-4 col-md-3">
                                    <p>Provided Pickup 
                                    <% if(userData.deliveryType != '1'){ %>
                                    <i class="zmdi zmdi-check-square zmdi-hc-fw pickup-check-icon"></i>
                                    <% }else{  %>
                                    <i class="zmdi zmdi-square-o zmdi-hc-fw pickup-check-icon"></i>
                                    <% } %>
                                    </p>
                                    </div>
                                    <div class="col-sm-4 col-md-3">
                                    <p>Provided Self Delivery 
                                    <% if(userData.deliveryType != '0'){ %>
                                    <i class="zmdi zmdi-check-square zmdi-hc-fw pickup-check-icon"></i>
                                    <% }else{  %>
                                    <i class="zmdi zmdi-square-o zmdi-hc-fw pickup-check-icon"></i>
                                    <% } %>
                                    </p>
                                    </div>
                                    <div class="col-sm-4 col-md-3">
                                    <p>Provided Point <%- userData.address1 %> 
                                    <i class="zmdi zmdi-pin zmdi-hc-fw pickup-check-icon"></i>
                                    </p>
                                    </div>
                                    </div>
                                    <div class="row">
                                    <div class="col-sm-4 col-md-2">
                                    <label>Opening Hours</label>
                                    </div>
                                    <div class="col-sm-8 col-md-10">
                                    <% for(var d=0;d<userData.companyTimings.length;d++){ %>
                                    <% 
                                    var type = "";
                                    if(userData.companyTimings[d].day =="mon") type="Monday"
                                    if(userData.companyTimings[d].day =="tue") type="Tuesday"
                                    if(userData.companyTimings[d].day =="wed") type="Wednesday"
                                    if(userData.companyTimings[d].day =="thu") type="Thursday"
                                    if(userData.companyTimings[d].day =="fri") type="Friday"
                                    if(userData.companyTimings[d].day =="sat") type="Saturday"
                                    if(userData.companyTimings[d].day =="sun") type="Sunday"
                                    %>
                                    <div class="row">
                                    <div class="col-sm-4 col-md-3">
                                    <p class="mt-details-day"><%- type %> 
                                    <% if(userData.companyTimings[d].availability == '1'){ %>
                                    <i class="zmdi zmdi-check-square zmdi-hc-fw pickup-check-icon"></i>
                                    <% }else{ %>
                                    <i class="zmdi zmdi-close zmdi-hc-fw pickup-check-icon"></i>
                                    <% } %>
                                    </p>
                                    </div>
                                    <div class="col-sm-4 col-md-3">
                                    <div class="form-group">
                                    <div class="fg-line">
                                    <div class="select">
                                    <select class="form-control" disabled>
                                    <option><%- userData.companyTimings[d].startTime %></option>
                                    </select>
                                    </div>
                                    </div>
                                    </div>
                                    </div>
                                    <div class="col-sm-4 col-md-3">
                                    <div class="form-group">
                                    <div class="fg-line">
                                    <div class="select">
                                    <select class="form-control" disabled>
                                    <option><%- userData.companyTimings[d].endTime %></option>
                                    </select>
                                    </div>
                                    </div>
                                    </div>
                                    </div>
                                    </div>
                                    <% } %>
                                    </div>
                                    </div>
                                    <div class="row">
                                    <div class="col-sm-4 col-md-2">
                                    <label>Holidays</label>
                                    </div>
                                    <div class="col-sm-4 col-md-8">
                                    <div id="calendar"></div>
                                    </div>
                                    </div>

                                    </div>
                                    </div>
                                </div>
                                    <div role="tabpanel" class="tab-pane" id="cost">
                                      <div id="container1"></div>
                                    </div>
                                    <div role="tabpanel" class="tab-pane" id="settings11">
                                      <form role="form" id="privacyform" method="POST" enctype="multipart/form-data">
                                        <div class="form-group fg-float">
                                          <div class="fg-line">
                                              <input type="text"  maxlength="60" id="accountName" value="<%- userData.accountName %>" name="accountName" class="input-sm form-control fg-input">
                                              <label class="fg-label">Account Name</label>
                                          </div>
                                        </div>
                                        <br>
                                        <div class="form-group fg-float">
                                          <div class="fg-line">
                                              <input type="text" maxlength="60" id="accountNumber" value="<%- userData.accountNumber %>" name="accountNumber" class="input-sm form-control fg-input">
                                              <label class="fg-label">Account Number</label>
                                          </div>
                                        </div>
                                      </form>
                                    </div>
                                </div>
                            </div>
    </section>
</section>
  <%- include ('../../../partials/scripts') %>
  <%- include ('../../../partials/commonJs') %>
  <script src="https://code.highcharts.com/highcharts.js"></script>
<script type="text/javascript">
  $(function() {
    $('#restaurantTab').addClass('active');
    $('#restaurantTab a[href^="<%- adminpath %>restaurant"]').addClass('active');
    getResturantYearlyRevenue();
  });
    $(document).ready(function() {

                var holidays = '<%- userData.holidays %>';
                console.log( holidays );
                if(holidays){
                    var ar = holidays.split(',');
                    console.log( ar.length );
                }else{
                    var ar = [];
                }
                
                var newArray = [];
                for(var i=0;i< ar.length;i++)
                {
                    var dat = ar[i];
                    console.log(dat);
                    var array = {};
                    array.title = "Holiday";
                    array.start = new Date(dat);
                    array.allDay = true;
                    array.className = 'bgm-orange';

                    newArray.push(array);
                }
                console.log(newArray)
                var date = new Date();
                var d = date.getDate();
                var m = date.getMonth();
                var y = date.getFullYear();

                var cId = $('#calendar'); //Change the name if you want. I'm also using thsi add button for more actions

                //Generate the Calendar
                cId.fullCalendar({
                    header: {
                        right: '',
                        center: 'prev, title, next',
                        left: ''
                    },
                    selectable: true,
                    selectHelper: true,
                    //Add Events
                    events: newArray,
                     
                    //On Day Select
                    select: function(start, end, allDay) {
                        $('#addNew-event').modal('show');   
                        $('#addNew-event input:text').val('');
                        $('#getStart').val(start);
                        $('#getEnd').val(end);
                    }
                });
                });
function getResturantYearlyRevenue()
    {
        var val = $('#restId').val();

      
        $.ajax({
            type: 'POST',
            url: '<%- adminpath %>getResturantYearlyRevenue',
            dataType: 'json',
            data: {'id':val},
            success: function (response) {
            console.log(response.body)
                $('#container1').highcharts({

                    chart: {
                        type: 'line'
                    },
                    title: {
                        text: 'Yearly Revenue Statistics'
                    },
                    xAxis: {
                        categories: response.body[0].months
                    },
                    yAxis: {
                        title: {
                            text: 'Revenue ($)'
                        }
                    },
                    plotOptions: {
                        line: {
                            dataLabels: {
                                enabled: true
                            },
                            enableMouseTracking: false
                        }
                    },
                    series: [{
                        name: 'Monthly',
                        data: response.body[0].data
                    }]
                });
            },
        });


    }
</script>


 </body>
</html>